<div class="staff-mgmt-container">

  <div class="header d-flex justify-content-between align-items-center mb-3">
    <h3>Staff Management ({{ hodDepartment }})</h3>
    <button class="btn btn-primary" (click)="toggleAddForm()">
      {{ showAddForm ? 'Close' : 'Add Staff' }}
    </button>
  </div>

  <!-- Add Staff Form -->
  <div *ngIf="showAddForm" class="card p-3 mb-3">
    <form [formGroup]="addStaffForm" (ngSubmit)="addStaff()">
      <div class="row g-2">
        <div class="col-md-3"><input class="form-control" placeholder="Full Name" formControlName="name"></div>
        <div class="col-md-2"><input class="form-control" placeholder="Username" formControlName="username"></div>
        <div class="col-md-3"><input class="form-control" placeholder="Email" formControlName="email"></div>
        <div class="col-md-2"><input class="form-control" placeholder="Mobile" formControlName="contactNumber"></div>
        <div class="col-md-2"><input class="form-control" placeholder="Password" type="password" formControlName="password"></div>
      </div>
      <button class="btn btn-success mt-2" type="submit">Add Staff</button>
    </form>
  </div>

  <!-- Staff Table -->
  <table class="table table-bordered table-striped">
    <thead class="table-dark">
      <tr>
        <th>Full Name</th>
        <th>Username</th>
        <th>Email</th>
        <th>Mobile</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let staff of paginatedStaff">
        <td>{{ staff.name }}</td>
        <td>{{ staff.username }}</td>
        <td>{{ staff.email }}</td>
        <td>{{ staff.contactNumber }}</td>
        <td>
          <button class="btn btn-info btn-sm me-1" (click)="viewStaff(staff)">View</button>
          <button class="btn btn-danger btn-sm" (click)="deleteStaff(staff)">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Pagination -->
  <div class="pagination d-flex justify-content-center gap-2 mt-2">
    <button class="btn btn-secondary btn-sm" (click)="prevPage()" [disabled]="currentPage === 1">Prev</button>
    <span>Page {{ currentPage }} of {{ totalPages }}</span>
    <button class="btn btn-secondary btn-sm" (click)="nextPage()" [disabled]="currentPage === totalPages">Next</button>
  </div>

</div>

<!-- View Staff Modal -->
<div *ngIf="showViewModal" class="modal-backdrop">
  <div class="modal-card">
    <h4>{{ selectedStaff.name }} - Details</h4>
    <p><strong>Username:</strong> {{ selectedStaff.username }}</p>
    <p><strong>Email:</strong> {{ selectedStaff.email }}</p>
    <p><strong>Mobile:</strong> {{ selectedStaff.contactNumber }}</p>
    <p><strong>Department:</strong> {{ selectedStaff.department }}</p>
    <button class="btn btn-secondary" (click)="closeView()">Close</button>
  </div>
</div>
